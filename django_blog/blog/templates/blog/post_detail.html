{% extends 'blog/base.html' %} {% load static %} {% block title %} {{ post.title
}} {% endblock %} {% block content %}
<div class="post-detail-container">
  <article class="post-detail">
    <header class="post-header">
      <h1 class="post-title">{{ post.title }}</h1>
      <div class="post-meta">
        <span class="post-author">By {{ post.author.username }}</span>
        <span class="post-date">{{ post.published_date|date:"F d, Y" }}</span>
      </div>
    </header>

    <div class="post-content">{{ post.content|linebreaks }}</div>

    <footer class="post-footer">
      {% if user == post.author %}
      <div class="post-actions">
        <a
          href="{% url 'post_update' post.id %}"
          class="btn btn-outline-secondary"
          >Edit</a
        >
        <a href="{% url 'post_delete' post.id %}" class="btn btn-outline-danger"
          >Delete</a
        >
      </div>
      {% endif %}
      <a href="{% url 'post_list' %}" class="btn btn-outline-primary"
        >Back to Posts</a
      >
    </footer>
  </article>

  <section class="comments-section">
    <h3 class="comments-title">Comments</h3>

    <!-- Comment Form -->
    {% if user.is_authenticated %}
    <div class="comment-form-container">
      <h4>Leave a Comment</h4>
      <form
        method="POST"
        action="{% url 'comment_create' post.id %}"
        class="comment-form"
      >
        {% csrf_token %} {{ comment_form.as_p }}
        <button type="submit" class="btn btn-primary">Submit Comment</button>
      </form>
    </div>
    {% else %}
    <div class="comment-login-prompt">
      <p>Please <a href="{% url 'login' %}">login</a> to leave a comment.</p>
    </div>
    {% endif %}

    <!-- Comments List -->
    <div class="comments-list">
      {% if post.comments.all %} {% for comment in post.comments.all %}
      <div class="comment">
        <div class="comment-header">
          <span class="comment-author">{{ comment.author.username }}</span>
          <span class="comment-date"
            >{{ comment.created_at|date:"F d, Y g:i A" }}</span
          >
        </div>
        <div class="comment-content">{{ comment.content|linebreaks }}</div>
        {% if user == comment.author %}
        <div class="comment-actions">
          <a href="{% url 'comment_update' comment.id %}" class="comment-edit"
            >Edit</a
          >
          <a href="{% url 'comment_delete' comment.id %}" class="comment-delete"
            >Delete</a
          >
        </div>
        {% endif %}
      </div>
      {% endfor %} {% else %}
      <p class="no-comments">No comments yet. Be the first to comment!</p>
      {% endif %}
    </div>
  </section>
</div>
{% endblock %}
